var startTime,timer,canPlay;function timedCount(){if(canPlay){var b=new Date-startTime,d=Math.floor(b/36E5),b=b-36E5*d,e=Math.floor(b/6E4),b=Math.floor((b-6E4*e)/1E3);$("#timer-label").text((10>d?"0"+d:d)+":"+(10>e?"0"+e:e)+":"+(10>b?"0"+b:b));timer=setTimeout("timedCount()",1E3)}}
$(document).ready(function(){function b(){$(".word-image:first").load(function(){var a=130*this.height/this.width;$(".back-image,.front-image").height(a);$(".plus-ten,.minus-one,.word-term-ipa").css("line-height",a+"px");$(".card-wrap").height(a+10)})}function d(a){var b=".back-image",d=".front-image",g=parseInt($("#"+a).attr("data-flip"));0==g&&(d=".back-image",b=".front-image");$("#"+a).children(d).animate({width:"0px","margin-left":"65px"},h,function(){$(this).hide();$(this).siblings(b).show().animate({width:"130px",
"margin-left":"0px"},h,function(){$(this).parent().attr("data-flip",1-g);var a=$('.not-selected[data-flip="1"]');if(a.length==2)if($(a[0]).attr("data-value")!=$(a[1]).attr("data-value")){playSound(baseUrl+"/audio/wrong.mp3");c=c-1;$("#score-label").text(c+" poins");e($(a[0]).attr("id"));e($(a[1]).attr("id"))}else{$(".term-blank:first").text(i[$(a[0]).attr("data-value")].term).addClass("word-term").removeClass("term-blank");playSound(resourceUrl+i[$(a[0]).attr("data-value")].audio);c=c+10;j++;$("#score-label").text(c+
" points");l($(a[0]).attr("id"));l($(a[1]).attr("id"));j==f&&m()}})})}function e(a){d(a);$("#"+a).children(".minus-one").show().animate({"font-size":"60px",opacity:1},2*h,function(){$(this).css({"font-size":"20px",opacity:0.3}).hide()})}function l(a){$("#"+a).removeClass("not-selected").children(".front-image,.back-image").animate({opacity:0},h,function(){$(this).siblings(".plus-ten").show().animate({"font-size":"60px",opacity:1},h,function(){$(this).css({"font-size":"20px",opacity:0.3}).hide()})})}
function n(){canPlay=!0;j=0;$("#memorise-game-result-board").hide();$("#card-container,#word-term-container").show();i=shuffle(activityContent.card);g=generateRandomArr(2*f);for(var a=0;a<f;a++)$("#card-wrap-"+g[2*a]).attr("data-value",a).append('<img class="word-image front-image" src="'+resourceUrl+i[a].image+'" alt="Word image">'),$("#card-wrap-"+g[2*a+1]).attr("data-value",a).append('<div class="word-term-ipa front-image">'+i[a].term+"</span></div>");$(".front-image").hide().css({width:"0px",
"margin-left":"70px"});$(".plus-ten,.minus-one").css({"font-size":"20px",opacity:0.3}).hide();startTime=new Date;timer=setTimeout("timedCount()",1E3)}function m(){canPlay=!1;$("#result-board-point").text(c);$("#result-board-time").text($("#timer-label").text());$("#result-board-click").text(k);$("#card-container,#word-term-container").fadeOut(1E3,function(){playSound(baseUrl+"/audio/memorise-game/cheer.mp3");$("#memorise-game-result-board").fadeIn(1E3)});score=c>=8*f?100:0>=c?0:Math.floor(100*(c/
(8*f)));$("#score-text").text(score);var a=f-$(".not-selected").length/2;$("#num-of-correct-answers-result").text(a+"/"+f);$("#show-result").show("slide",{direction:"left"},Ucan.Constants.getShowResultSpeed())}var h=300,c=0,k=0,f=activityContent.numOfWord,i,g,j;n();b();$(".card-wrap").click(function(){$(this).hasClass("not-selected")&&2>=$('.not-selected[data-flip="1"]').length&&(k++,d($(this).attr("id")))});$("#play-again, #redo").click(function(){$("#show-result").hide("slide",{direction:"left"},
Ucan.Constants.getHideResultSpeed(),function(){k=c=j=0;$(".front-image").remove();$(".word-term").text("").addClass("term-blank").removeClass("word-term");$(".card-wrap").attr("data-flip","0").addClass("not-selected");$(".back-image").show().css({width:"130px","margin-left":"0px",opacity:"1"});$("#score-label").text("0 points");n();b()})});$("#loadResult").click(function(){canPlay&&m()});$("#go-to-next").click(function(){window.location.replace(nextActivityUrl)})});
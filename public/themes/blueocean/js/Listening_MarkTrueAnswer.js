$(document).ready(function(){function n(){b=c="";l=[];g=[];if(0<e){var a="";"undefined"!=typeof activityContent.sentenseTitle&&(a=activityContent.sentenseTitle);c+='<div class="sentence">'+a+"</div>";c+='<div class="choice">';for(a=0;a<d.length;a++)c+='<span class ="name">'+d[a]+"</span>";c+="</div>";c+='<div class="answer"><span id="true-false-icon"></span></div>';$("#sentences-title").append(c);b+='<table width="850px" cellpadding="0" cellspacing="0">';for(a=0;a<e;a++){l[a]=activityContent.group[a].sentence.replace(/\[(.*?)\]/,
"").replace(/^\s+|\s+$/g,"");g[a]=activityContent.group[a].sentence.match(/\[(.*?)\]/)[0];b+='<tr class="sentences-row">\n<td style="width:10px"></td>  <td class="sentences">'+l[a]+'</td>\n<td  class="true-false">';for(j=0;j<d.length;j++)b+='<div id="check_'+a+"_"+j+'" class="ui-button-text  global-choice-circle" data-value="0"></div>';b+='<td class="answers"><span class="true-false-icon" id="true-false-icon_'+a+'"></td></tr>'}b+="</table>"}a=54*d.length;$(".sentence").width(1E3-a-70);$("#sentence-row").append(b);
$(".true-false").width(52*d.length);$(".ui-button-text").click(function(){f&&($(this).attr("data-value","1"),$(this).addClass("checked"),$(this).siblings().attr("data-value","0").removeClass("checked"))});$(".ui-button-text").hover(function(){f&&$(this).attr("data-value")},function(){$(this).attr("data-value")})}var f=!0,m=!1,e=activityContent.group.length,c,b,d=[],l=[],g=[];if(void 0!=activityContent.choices&&""!=activityContent.choices){for(var o=activityContent.choices.split("/"),p=[],h=0;h<o.length;h++)p[h]=
o[h].replace(/^\s+|\s+$/g,"").substring(0,1);d=p}else for(i=0;i<e;i++)void 0!=activityContent.group[i].sentence.match(/\[(.*?)\]/)[0].replace("[","").replace("]","")&&-1==jQuery.inArray(activityContent.group[i].sentence.match(/\[(.*?)\]/)[0].replace("[","").replace("]",""),d)&&d.push(activityContent.group[i].sentence.match(/\[(.*?)\]/)[0].replace("[","").replace("]",""));n();var k=0;$("#loadResult").click(function(){if(f){f=!1;$(".cp-jplayer").jPlayer("stop");playSound(Ucan.Resource.Audio.getShowResultSound());
for(i=k=0;i<e;i++){var a=-1;for(j=0;j<d.length;j++)a="1"==$("#check_"+i+"_"+j).attr("data-value")?j:a;$.inArray(g[i][1],d)==a?(k++,insertTrueFalseIcon(!0,"#true-false-icon_"+i)):insertTrueFalseIcon(!1,"#true-false-icon_"+i)}$(".true-icon, .false-icon").ucanAnimateTrueFalseIcon();$("#num-of-correct-answers-result").text(k+"/"+e);score=Math.floor(100*(k/e));$("#score-text").text(score);$("#show-result").show("slide",{direction:"left"},Ucan.Constants.getShowResultSpeed());m=!0}});$("#redo").click(function(){m&&
(m=!1,$("#show-result").hide("slide",{direction:"left"},Ucan.Constants.getHideResultSpeed(),function(){f=!0;$("#show-result").slideUp(1200);$(".true-icon,.false-icon").css({visibility:"hidden"});$(".ui-button-text").attr("data-value","0").removeClass("checked");$("#sentences-title").html("");$("#sentence-row").html("");n()}))});$("#show-answer").click(function(){$(".ui-button-text").attr("data-value","0").removeClass("checked");for(i=0;i<e;i++)for(j=0;j<d.length;j++)j==$.inArray(g[i][1],d)&&$("#check_"+
i+"_"+j).attr("data-value","1").addClass("checked");$(".checked").fadeOut(500).fadeIn(500)})});
$(document).ready(function(){function n(a){var d=a.indexOf("["),c=a.indexOf("]"),b=[];return-1!=d&&-1!=c&&d<c?(b[0]=a.substring(d+1,c),b[1]=a.substring(0,d),b[2]=a.substring(c+1,a.length),b):!1}function g(a){return 0==$.trim(a).indexOf("#")?!0:!1}function l(){var a='<ul id="sentences">',d=0;for(i=0;i<h;i++){m[i]=activityContent.group[i].words;var c=n(m[i]);if(!1!=c){d++;b[i]=c[0].split("||");a+='<li class="sentence">'+d+". "+c[1];a+='<span id="choice_'+i+'" class="choices-container">\n';for(j=0;j<
b[i].length;j++)a+=0<j?" / ":"",a+='<span class="choice" id="choice_'+i+"_"+j+'">'+(!1==g(b[i][j])?b[i][j]:$.trim(b[i][j]).substring(1))+"</span>";a+="</span>"+c[2]+'<span class="true-false-icon"></li>'}}$("#sentences-container").append(a+"</ul>");$(".choice").click(function(){!1!=e&&(playSound(Ucan.Resource.Audio.getClickedSound2()),$(this).siblings().stop(!0,!0).animate({opacity:"0.3"},500).animate({color:"#8c8c8c",opacity:"1"},500).removeClass("chosen"),$(this).stop(!0,!0).animate({opacity:"0.3"},
500).animate({color:"#f5770f",opacity:"1"},500).addClass("chosen"))})}var h=activityContent.group.length,e=!0,m=[],b=[],k=!1;l();$("#show-answer").click(function(){var a=0;$("li.sentence").each(function(){var d;for(j=0;j<b[a].length;j++){g(b[a][j])&&(d=$.trim(b[a][j]));var c=$("#choice_"+a+"_"+j);"#"+$.trim($(c).text())==d&&($(c).css({color:"#f5770f",opacity:"1"}),$(c).addClass("visited"),$(c).siblings().css({color:"#8c8c8c"}))}a++});$(".visited").fadeOut(500).fadeIn(500)});var f=0;$("#loadResult").click(function(){!1!=
e&&(e=!1,playSound(Ucan.Resource.Audio.getShowResultSound()),f=0,$(".choices-container .chosen").each(function(){var a=parseInt($(this).attr("id").split("_")[1]),d;for(j=0;j<b[a].length;j++)g(b[a][j])&&(d=$.trim(b[a][j]));"#"+$.trim($(this).text())==d?(f++,insertTrueFalseIcon(!0,$(this).parent().parent().children(".true-false-icon"))):insertTrueFalseIcon(!1,$(this).parent().parent().children(".true-false-icon"))}),$(".choices-container").each(function(){0==$(this).children(".chosen").length&&insertTrueFalseIcon(!1,
$(this).parent().children(".true-false-icon"))}),$(".true-icon, .false-icon").ucanAnimateTrueFalseIcon(),$("#num-of-correct-answers-result").text(f+"/"+h),score=Math.floor(100*(f/h)),$("#score-text").text(score),$("#show-result").show("slide",{direction:"left"},Ucan.Constants.getShowResultSpeed()),k=!0,$("input:radio").button("disable"))});$("#redo").click(function(){k&&(k=!1,$("#show-result").hide("slide",{direction:"left"},Ucan.Constants.getHideResultSpeed(),function(){e=!0;$("#sentences-container").html("");
l()}))})});
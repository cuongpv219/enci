var canPlay=!0,canClickRedo=!1,count,sentences=[],score,unShowClickResult=0;
$(document).ready(function(){function f(a){question_number="";question_number+='<div id="question-number_'+a+'" class="question_number">';question_number+=a+1;return question_number+="</div>"}function b(a){$(".global-tab-container").ucanMoveToTab(a);d();setTimeout(function(){m(a)},600);c=parseInt(a);k++}function d(){g=!0;$("#questions-wrapper").stop(!0,!0).animate({top:-120},500,function(){$(this).css({top:0});$("#questions-board").children().hide();$("#question-number").children().hide()})}function m(a){$("#questions-wrapper").css({top:-120});
$("#question-container_"+a).show();$("#question-number_"+a).show();$("#questions-wrapper").animate({top:0},500,function(){g=!1})}function l(){for(var a=0;a<count;a++)sentences[a]=$.trim(activityContent.group[a].sentence).split("||"),$("#question-link").append('<div id="question_'+a+'" class = "pagination unselected"  data-order="'+a+'">'+(a+1)+'<img class="false" src="'+baseUrl+'/themes/blueocean/img/tab-false-icon.png"></img><img class="true" src="'+baseUrl+'/themes/blueocean/img/tab-true-icon.png"></img></div>');
$(".pagination").each(function(){if(!g){var a=$(this).attr("id").substring(9),b=parseInt(a);question="";var e;e=sentences[b][0].substring(3);var c=e.indexOf("["),d=e.indexOf("]"),h=[];-1!=c&&-1!=d&&c<d?(h[1]=e.substring(c+1,d),h[0]=e.substring(0,c),h[2]=e.substring(d+1,e.length),e=h):e=!1;if(-1!=(0==activityContent.group[b].sentence.indexOf("[T]")?1:0==activityContent.group[b].sentence.indexOf("[F]")?0:-1)&&!1!=e)question+='<div id="question-container_'+b+'" class="question_container"><div class="sentence-container">',
question+=e[0]+'<span class="highlighted">'+e[1]+"</span>"+e[2]+'</div>\n<div class="true-false-container"><span id="radio_'+b+'">\n<label class="right-button global-button-orange-1" value="0" id="radio_'+b+'_1" >'+multiLangSystem.button_right+'</label>\n<label class="wrong-button global-button-orange-1" value="0" id="radio_'+b+'_0" >'+multiLangSystem.button_wrong+'</label></span>\n<span><input type="text" name="textbox_'+b+'" disabled="disabled" class="inputtext"/></span></div>\n</div>';question_number=
f(parseInt(a));$("#questions-board").append(question);question_number=f(parseInt(a));$("#question-number").append(question_number)}});$(".pagination").click(function(){var a=$(this).attr("data-order");b(a)});b(0);$(".right-button").click(function(){0==$(this).attr("value")&&($(this).attr("value","1"),$(this).removeClass("global-button-orange-1").addClass("global-button-green-1"),$(this).siblings().attr("value","0"),$(this).siblings().addClass("global-button-orange-1").removeClass("global-button-green-1"),
$(this).parent().next().children().attr("disabled",!0),$(this).parent().next().children().css({"-moz-box-shadow":"inset 0 16px 17px -21px #fff","-webkit-box-shadow":"inset 0 16px 17px -21px #fff","box-shadow":"inset 0 16px 17px -21px #fff"}))});$(".wrong-button").click(function(){0==$(this).attr("value")&&($(this).attr("value","1"),$(this).removeClass("global-button-orange-1").addClass("global-button-green-1"),$(this).siblings().attr("value","0"),$(this).siblings().addClass("global-button-orange-1").removeClass("global-button-green-1"),
$(this).parent().next().children().attr("disabled",!1),$(this).parent().next().children().css({"-moz-box-shadow":"inset 0 16px 17px -21px #d9d9d9","-webkit-box-shadow":"inset 0 16px 17px -21px #d9d9d9","box-shadow":"inset 0 16px 17px -21px #d9d9d9"}),$(this).parent().next().children().focus())});$("#loadResult").click(function(){$(document).keyup(function(a){13==a.keyCode&&$("#multipage-confirm-dialog-button-no").click()});1==k&&1<count?(unShowClickResult++,1==unShowClickResult&&($(".overlay-black").show(),
$("#multipage-confirm-dialog").fadeIn(500))):loadResult()})}var c=0,g=!1,k=0;count=activityContent.group.length;$(document).keyup(function(a){39==a.which&&c<count-1&&(c++,b(c));37==a.which&&0<c&&(c--,b(c))});l();$("#next-link").click(function(){g||c<count-1&&b(c+1)});$("#prev-link").click(function(){g||0<c&&b(c-1)});$("#redo").click(function(){k=unShowClickResult=0;canClickRedo&&(canClickRedo=!1,canPlay=!0,$("#show-result").hide("slide",{direction:"left"},Ucan.Constants.getHideResultSpeed(),function(){c=
0;$("#show-result").slideUp(1200);$("#question-link").html("");$("#question-number").html("");$("#questions-board").html("");$("#questions").html("");l()}))});$("#show-answer").click(function(){for(j=0;j<count;j++)if(0==sentences[j][0].indexOf("[T]"))$("#radio_"+j+"_1").addClass("global-button-green-1").removeClass("global-button-orange-1"),$("#radio_"+j+"_0").addClass("global-button-orange-1").removeClass("global-button-green-1"),$("#radio_"+j+"_1").fadeOut(500).fadeIn(500),$("input:text[name=textbox_"+
j+"]").val("").attr("disabled","disabled");else{var a=sentences[j][1];$("input:text[name=textbox_"+j+"]").val(a);$("#radio_"+j+"_1").addClass("global-button-orange-1").removeClass("global-button-green-1");$("#radio_"+j+"_0").addClass("global-button-green-1").removeClass("global-button-orange-1");$("#radio_"+j+"_0").fadeOut(500).fadeIn(500)}})});function checkTextTypedByLearner(f,b){var d=b.split("/");for(i=0;i<d.length;i++)if(isEqualString(f,d[i]))return!0;return!1}
function loadResult(){if(canPlay){canPlay=!1;numberOfTrueAnswers=0;playSound(Ucan.Resource.Audio.getShowResultSound());for(j=0;j<count;j++){var f=$("#radio_"+j+"_1").attr("value"),b=$("#radio_"+j+"_0").attr("value");if(1==f&&0==sentences[j][0].indexOf("[T]"))numberOfTrueAnswers++,$("#question_"+j).children(".true").show(),$("#question_"+j).children(".true").fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500);else if(1==b&&0==sentences[j][0].indexOf("[F]")){text_typed_by_learner=$("input:text[name=textbox_"+
j+"]").val();for(var f=[],f=sentences[j][1].toLowerCase().split("\\"),b=!1,d=0;d<f.length;d++)checkTextTypedByLearner(text_typed_by_learner.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").toLowerCase(),f[d])&&(numberOfTrueAnswers++,b=!0,$("#question_"+j).children(".true").show(),$("#question_"+j).children(".true").fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500));b||($("#question_"+j).children(".false").show(),$("#question_"+j).children(".false").fadeOut(500).fadeIn(500))}else $("#question_"+
j).children(".false").show(),$("#question_"+j).children(".false").fadeOut(500).fadeIn(500)}$("#num-of-correct-answers-result").text(numberOfTrueAnswers+"/"+count);score=Math.floor(100*(numberOfTrueAnswers/count));$("#score-text").text(score);$("#show-result").show("slide",{direction:"left"},Ucan.Constants.getShowResultSpeed());canClickRedo=!0;$("input:radio").button("disable")}};
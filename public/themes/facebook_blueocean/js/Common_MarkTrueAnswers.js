$(document).ready(function(){function m(a){for(var a=a.split("/"),b=[],c=0;c<a.length;c++)b[c]=a[c].replace(/^\s+|\s+$/g,"").substring(0,1);return b}var e=activityContent.group.length,a="",c=[];if(void 0!=activityContent.choices&&""!=activityContent.choices)c=m(activityContent.choices);else for(i=0;i<e;i++)if(void 0!=activityContent.group[i].sentence.match(/\[(.*?)\]/)[0].replace("[","").replace("]",""))for(var d=activityContent.group[i].sentence.match(/\[(.*?)\]/)[0].replace("[","").replace("]",
""),b=0;b<d.length;b++)-1==jQuery.inArray(d[b],c)&&c.push(d[b]);var d=[],j=[],g=!0,k=!1;if(0<e){b="";activityContent.sentenseTitle||(b=activityContent.sentenseTitle);a=a+'<table id="sentences" border="0" cellspacing="0" width="100%"><thead>'+('<td class="sentences-title global-blue-bar">'+b+"</td>");for(b=0;b<c.length;b++)a+='<td class="sentences-choices">'+c[b]+"</td>";a+='<td class="sentences-answers global-blue-bar"><span></span></td></thead>';for(i=0;i<e;i++){d[i]=activityContent.group[i].sentence.replace(/\[(.*?)\]/,
"").replace(/^\s+|\s+$/g,"");j[i]=activityContent.group[i].sentence.match(/\[(.*?)\]/)[0];a+='<tr class="sentences-row">';a+='<td class="sentences">'+d[i]+"</td>";for(b=0;b<c.length;b++)a+='<td><div id="check_'+i+"_"+b+'" class="ui-button-text global-choice-square-green-1" value="0"></div></td>';a+='<td class="answers"><span id="true-false-icon_'+i+'"></span></td></tr>'}a+="</table>"}$("#sentences-container").append(a);$(".ui-button-text").click(function(){g&&(playSound(Ucan.Resource.Audio.getClickedSound()),
"0"==$(this).attr("value")?$(this).attr("value","1").addClass("checked"):$(this).attr("value","0").removeClass("checked"))});var f=0;$("#loadResult").click(function(){if(g){g=!1;f=0;playSound(Ucan.Resource.Audio.getShowResultSound());for(var a=0;a<e;a++){for(var b=0,d=0;d<c.length;d++)b+="1"==$("#check_"+a+"_"+d).attr("value")?Math.pow(2,d):0;for(var d=a,l=0,h=0;h<c.length;h++)l+=-1<j[d].search(c[h])?Math.pow(2,h):0;l==b?(f++,insertTrueFalseIcon(!0,"#true-false-icon_"+a)):insertTrueFalseIcon(!1,"#true-false-icon_"+
a)}$(".true-icon, .false-icon").ucanAnimateTrueFalseIcon();$("#num-of-correct-answers-result").text(f+"/"+e);score=Math.floor(100*(f/e));$("#score-text").text(score);$("#show-result").show("slide",{direction:"left"},Ucan.Constants.getShowResultSpeed());k=!0}});$("#redo").click(function(){k&&(k=!1,$("#show-result").hide("slide",{direction:"left"},Ucan.Constants.getHideResultSpeed(),function(){g=!0;$("#show-result").slideUp(1200);$(".ui-button-text").removeClass("");$(".true-icon, .false-icon").remove();
$(".ui-button-text").attr("value","0").removeClass("checked")}))});$("#show-answer").click(function(){f=0;$(".ui-button-text").attr("value","0").removeClass("checked");for(var a=0;a<e;a++)for(var b=0;b<c.length;b++)-1<j[a].search(c[b])&&($("#check_"+a+"_"+b).attr("value","1").addClass("checked"),$("#check_"+a+"_"+b).stop(!0,!0).fadeOut(500).fadeIn(500))})});
$(document).ready(function(){function j(){b=[];var a="",d="",c=shuffle(activityContent.group),e=[];for(i=0;i<g;i++)-1==$.inArray(c[i].character,b)?(e[b.length]='<div class="character-picture-holder" ><img class="character-picture" src="'+c[i].character+'" pictureId="'+b.length+'" /></div>',d+='<div class="sentence-holder"><div class="represent-picture represent-picture-unmatch" pictureId="'+b.length+'"></div><span class="sentence" sentenceId="'+i+'">'+c[i].sentence+"</span></div>",b[b.length]=c[i].character): d+='<div class="sentence-holder"><div class="represent-picture represent-picture-unmatch" pictureId="'+$.inArray(c[i].character,b)+'"></div><span class="sentence">'+c[i].sentence+"</span></div>";e=shuffle(e);for(k=0;k<e.length;k++)a+=e[k];$("#pictures-container").append(a);$("#sentences-container").append(d);$("#reading-board").height()>$("#activity-board").height()?(500<$("#activity-board").height()?$("#reading-container").height($("#activity-board").height()-20):$("#reading-container").height(500), $("#activity-container").height($("#reading-container").height()+$("#activity-example").height()+20)):$("#activity-container").height($("#activity-board").height()+$("#activity-example").height()+20);2==b.length&&($(".character-picture-holder").css({"margin-left":"30px",width:"150px",height:"150px"}),$(".character-picture").css({width:"150px",height:"150px"}));$(".character-picture").draggable({revert:"invalid",helper:"clone",start:function(b,a){a.helper.css({width:"38px",height:"38px",border:"1px solid #ff3430"}); $(this).data("draggable").offset.click.top=19;$(this).data("draggable").offset.click.left=19}});$(".sentence-holder").droppable({accept:".character-picture",over:function(){$(this).children(".represent-picture").switchClass("represent-picture-match represent-picture-unmatch","represent-picture-over");playSound(Ucan.Resource.Audio.getClickedSound())},out:function(){$(this).children(".represent-picture").children().length>0?$(this).children(".represent-picture").switchClass("represent-picture-over", "represent-picture-match"):$(this).children(".represent-picture").switchClass("represent-picture-over","represent-picture-unmatch")},drop:function(b,a){if(f){playSound(Ucan.Resource.Audio.getClickedSound());$(this).children(".represent-picture").switchClass("represent-picture-over","represent-picture-match").children().remove();$(this).children(".represent-picture").append(a.draggable.clone().css({width:"38px",height:"38px"})).animate({opacity:"0.3"},500,function(){$(this).animate({opacity:"1"},500)})}}})} var g=activityContent.group.length,f=!0,b=[],h=!1;j();$("#reading-container").ucanJScrollPane("#reading-board");var a=0;$("#loadResult").click(function(){f&&(f=!1,$(".character-picture").draggable("disable"),playSound(Ucan.Resource.Audio.getShowResultSound()),a=0,$(".sentence-holder").each(function(){$(this).children(".represent-picture").attr("pictureId")==$(this).children(".represent-picture").children("img").attr("pictureId")?(a++,insertTrueFalseIcon(!0,$(this))):insertTrueFalseIcon(!1,$(this))}), $(".true-icon, .false-icon").ucanAnimateTrueFalseIcon(),$("#num-of-correct-answers-result").text(a+"/"+g),score=Math.floor(100*(a/g)),$("#score-text").text(score),$("#show-result").show("slide",{direction:"left"},Ucan.Constants.getShowResultSpeed()),h=!0)});$("#redo").click(function(){h&&(h=!1,$("#show-result").hide("slide",{direction:"left"},Ucan.Constants.getHideResultSpeed(),function(){f=!0;$("#pictures-container").html("");$("#sentences-container").html("");a=0;j()}))});$("#show-answer").click(function(){$(".represent-picture").each(function(){$(this).html('<img class="character-picture" src="'+ b[$(this).attr("pictureId")]+'" style="width: 38px; height: 38px; ">').fadeOut(500).fadeIn(500)})})});
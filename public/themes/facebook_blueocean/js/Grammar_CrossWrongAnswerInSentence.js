$(document).ready(function(){function m(a){var d=a.indexOf("["),c=a.indexOf("]"),b=[];return-1!=d&&-1!=c&&d<c?(b[0]=a.substring(d+1,c),b[1]=a.substring(0,d),b[2]=a.substring(c+1,a.length),b):!1}function g(a){return 0==$.trim(a.indexOf("#"))?!0:!1}function h(){var a='<ul id="sentences">',d=0;for(i=0;i<k;i++){l[i]=activityContent.group[i].words;var c=m(l[i]);if(!1!=c){d++;b[i]=c[0].split("||");a+='<li class="sentence">'+d+". "+c[1];a+='<span id="choice_'+i+'" class="choices-container">\n';for(j=0;j<
b[i].length;j++)a+=0<j?" / ":"",a+='<span class="choice" id="choice_'+i+"_"+j+'">'+(!1==g(b[i][j])?b[i][j]:$.trim(b[i][j]).substring(1,b[i][j].length))+"</span>";a+="</span>"+c[2]+'<span class="true-false-icon"></li>'}}$("#sentences-container").append(a+"</ul>");$(".choice").click(function(){!1!=f&&(playSound(Ucan.Resource.Audio.getClickedSound2()),$(this).siblings().animate({opacity:"0.3"},500,function(){$(this).css("text-decoration","")}).animate({color:"#4375b1",opacity:"1"},500).removeClass("chosen"),
$(this).animate({opacity:"0.3"},500,function(){$(this).css("text-decoration","line-through")}).animate({color:"#C12942",opacity:"1"},500).addClass("chosen"))})}var k=activityContent.group.length,f=!0,l=[],b=[];h();$("#show-answer").click(function(){var a=0;$("li.sentence").each(function(){var d;for(j=0;j<b[a].length;j++){g(b[a][j])&&(d=$.trim(b[a][j]));var c=$("#choice_"+a+"_"+j);"#"+$.trim($(c).text())==d&&($(c).css({"text-decoration":"line-through",color:"#C12942",opacity:"1"}),$(c).addClass("visited"),
$(c).siblings().css({"text-decoration":"none","background-color":"white",cursor:"pointer",color:"#4375B1","font-style":"italic"}))}a++});$(".visited").fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500)});var e=0;$("#loadResult").click(function(){if(!1!=f){f=!1;playSound(Ucan.Resource.Audio.getShowResultSound());var a=e=0;$(".choices-container .chosen").each(function(){var d;for(j=0;j<b[a].length;j++)g(b[a][j])&&(d=$.trim(b[a][j]));"#"+$.trim($(this).text())==d?(e++,insertTrueFalseIcon(!0,$(this).parent().parent().children(".true-false-icon"))):
insertTrueFalseIcon(!1,$(this).parent().parent().children(".true-false-icon"));a++});$(".true-icon").fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500);10>e?$("#num-of-correct-answers-result").html("0"+e):$("#num-of-correct-answers-result").html(e);score=Math.floor(100*(e/k));10>score?$("#score-text").html("0"+score):$("#score-text").html(score);$("input:radio").button("disable");$("#show-result").slideDown(2E3)}});$("#redo").click(function(){e=0;$("#show-result").slideUp(1200,
function(){f=!0;$("#sentences-container").html("");h()})})});
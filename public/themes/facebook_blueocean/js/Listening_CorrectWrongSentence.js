$(document).ready(function(){function h(){var a="";if(0<d){a+='<div class="sentences-choices">';for(b=0;b<e.length;b++)a+="<span >"+e[b]+"</span>";for(var a=a+"</div>",b=0;b<d;b++){var c=activityContent.group[b].sentence.split("||");m[b]=c[0];a+='<div class="sentences-row" id="sentences-row_'+b+'"><div class="ordering">'+(b+1)+'. </div><div class="sentences "><span class="sentence" id="sentence_'+b+'">'+m[b].substring(3)+'</span><span class="text-container" id="text-container_'+b+'"><input type="text" name="textbox" id="textbox_'+
b+'" class="inputtext"/></span></div>\n<div class="reset global-button-orange-small"> '+resetButtonLabel+' </div><div  class="true-false" groupid="'+b+'">';a+='<div id="check_'+b+'_0" class="true global-choice-circle" value="0">';a+="</div>";a+='<div id="check_'+b+'_1" class="false global-choice-circle" value="0">';a+="</div>";a+='</div><div class="answers"><span id="true-false-icon_'+b+'"></span></div>\n';a+="</div>"}}$("#sentences-container").append(a);$(".text-container").hide();$(".reset").hide();
$(".sentences-row").last().css("border-bottom","0");$(".reset").click(function(){$(this).parent().children(".sentences").children(".text-container").children(".inputtext").val($(this).parent().children(".sentences").children(".sentence").text());$(this).parent().children(".sentences").children(".text-container").children(".inputtext").focus()});$(".true").click(function(){f&&($(this).parent().parent().children(".reset").hide(),$(this).parent().siblings().children(".text-container").hide(),$(this).parent().siblings().children(".sentence").show(),
$(this).parent().parent().children(".sentences").css({width:"619px"}),"0"==$(this).attr("value")&&($(this).addClass("checked").attr("value","1"),$(this).siblings().attr("value","0").removeClass("checked")))});$(".false").click(function(){f&&($(this).parent().siblings().children(".text-container").show(),$(this).parent().parent().children(".sentences").css({width:"526px"}),$(this).parent().parent().children(".reset").show(),$(this).parent().siblings().children(".text-container").children(".inputtext").focus(),
$(this).parent().siblings().children(".text-container").children(".inputtext").val($(this).parent().siblings().children(".sentence").text()),$(this).parent().siblings().children(".sentence").hide(),"0"==$(this).attr("value")&&($(this).addClass("checked").attr("value","1"),$(this).siblings().attr("value","0").removeClass("checked")))})}var d=activityContent.group.length,e=["T","F"],m=[],f=!0,j=!1;h();var c=0;$("#loadResult").click(function(){if(f){f=!1;c=0;$(".cp-jplayer").jPlayer("stop");playSound(Ucan.Resource.Audio.getShowResultSound());
for(var a=0;a<d;a++){var b=activityContent.group[a].sentence.split("||");if("1"==$("#check_"+a+"_0").attr("value")&&0==b[0].indexOf("[T]"))c++,insertTrueFalseIcon(!0,"#true-false-icon_"+a);else if("1"==$("#check_"+a+"_1").attr("value")&&0==b[0].indexOf("[F]")){for(var h=$("#textbox_"+a).val().toLowerCase(),k=[],k=b[1].split("\\"),b=!1,l=0;l<k.length;l++){var g;a:{g=h.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").toLowerCase();var e=k[l].toLowerCase().replace(/<span class="global-highlight-orange">/g,
"").replace(/<\/span>/g,"").split("/");for(i=0;i<e.length;i++)if(isEqualString(g,e[i])){g=!0;break a}g=!1}if(g){b=!0;c++;insertTrueFalseIcon(!0,"#true-false-icon_"+a);break}}!1==b&&insertTrueFalseIcon(!1,"#true-false-icon_"+a)}else insertTrueFalseIcon(!1,"#true-false-icon_"+a)}$(".true-icon, .false-icon").ucanAnimateTrueFalseIcon();$("#num-of-correct-answers-result").text(c+"/"+d);score=Math.floor(100*(c/d));$("#score-text").text(score);$("#show-result").show("slide",{direction:"left"},Ucan.Constants.getShowResultSpeed());
j=!0}});$("#redo").click(function(){j&&(j=!1,$("#show-result").hide("slide",{direction:"left"},Ucan.Constants.getHideResultSpeed(),function(){f=!0;$("#show-result").slideUp(1200);$("#sentences-container").html('<div class="global-blue-bar"> </div>');h()}))});$("#show-answer").click(function(){for(var a=0;a<d;a++){var b=activityContent.group[a].sentence.split("||");0==b[0].indexOf("[T]")?($("#text-container_"+a).hide(),$("#sentence_"+a).show(),$("#sentences-row_"+a).find(".true").addClass("checked").fadeOut(500).fadeIn(500),
$("#sentences-row_"+a).find(".false").removeClass("checked")):($("#text-container_"+a).hide(),$("#sentence_"+a).fadeOut(500).fadeIn(500),$("#sentence_"+a).html(b[1].replace(/\[/g,"").replace(/\]/g,"")),$("#sentences-row_"+a).find(".true").removeClass("checked"),$("#sentences-row_"+a).find(".false").addClass("checked").fadeOut(500).fadeIn(500))}})})
$(document).ready(function(){function k(){$("#result-container").hide();var b="",c="";if(0<h){for(a=0;a<e.length;a++)c+="<span >"+e[a]+"</span>";for(var c=c+"</div>",a=0;a<h;a++){l[a]=activityContent.group[a].sentence;for(var b=b+('<div class="sentences-row" id="sentences-row_'+a+'"><div class="sentences "><span class="sentence" id="sentence_'+a+'">'+l[a]+'</span><span class="text-container" id="text-container_'+a+'"><input type="text" name="textbox" id="textbox_'+a+'" class="inputtext"/></span></div>'), d=0;d<e.length;d++)b+='<span id="check_'+a+"_"+d+'" class="true global-choice-circle" value="0">',b+="</span>";b+="</div>"}}$(".sentences-choices").append(c);$("#sentences-container").append(b);$(".sentences-choices").css({width:55*e.length+22+"px"});$(".sentences").css({width:1E3-55*e.length-90+"px"});$(".text-container").hide();$(".true").click(function(){"0"==$(this).attr("value")&&($(this).attr("value","1").addClass("checked"),$(this).siblings().attr("value","0").removeClass("checked"))});$(".true").hover(function(){j&& "1"!=$(this).attr("value")&&$(this).children("img").attr("src",baseUrl+"/themes/blueocean/img/true_false_bullet_gray.png")},function(){"1"!=$(this).attr("value")&&$(this).children("img").attr("src",baseUrl+"/themes/blueocean/img/true_false_bullet_white.png")})}var h=activityContent.group.length,d=[],e=[];for(i=0;i<activityContent.choices.length;i++)d[i]=activityContent.choices[i].score,e[i]=activityContent.choices[i].name;var l=[],f=[],m=[];if(void 0!=activityContent.result)for(i=0;i<activityContent.result.length;i++)m[i]= activityContent.result[i].reading,f[i]=activityContent.result[i].totalscore;var n=activityContent.sentenceTitle,j=!0,g=0;k();$("#finish").click(function(){if(j){void 0==activityContent.result&&window.location.replace(nextActivityUrl);g=0;j=!1;playSound(Ucan.Resource.Audio.getShowResultSound());for(var b=parseInt(d[0]),c=0;c<d.length;c++)parseInt(d[c])>b&&(b=parseInt(d[c]));for(var b=b*h,a=0;a<h;a++)for(c=0;c<e.length;c++)1==$("#check_"+a+"_"+c).attr("value")&&(g+=parseInt(d[c]));c='<div class="title">'+ n+"</div>";a='<span class="total">'+g+"</span>/<span>"+b+"</span>";b="";$("#topbar").append(c);$(".score").append(a);for(a=0;a<f.length;a++)b+='<div class="result" id="result_'+a+'"></div>';$("#yourResult").append(b);for(a=0;a<f.length;a++)$("#result_"+a).html(ucanMarkupToHtml(m[a]));$("#result-container").show();for(a=0;a<f.length;a++)if(g<=parseInt(f[a])){$("#result_"+a).show();break}}});$("#quizRedo").click(function(){numberOfTrueAnswers=0;j=!0;$("#sentences-container").html("");$("#topbar").html(""); $(".score").html("");$("#result-container").hide();$(".result").hide();$(".sentences-choices").html("");k()});$("#show-answer").click(function(){})});
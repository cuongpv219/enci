$(document).ready(function(){function f(a){$(".global-tab-container").ucanMoveToTab(a);pauseAllVideoJs();$("#phase-content-container").children().css("display","none");$(".navigator-button").attr("data-active","0");$(".navigator-button").addClass("unselected");$("#view-answer-button").css("background",'url("'+baseUrl+'/themes/blueocean/img/view-answer-button-inactive.png") no-repeat');g=parseInt(a);switch(a){case "0":$("#home-title-tab").css("display","block");$("#home-title-button").attr("data-active", "1");$("#home-title-button").addClass("selected").removeClass("unselected");break;case "1":$("#intro-video-tab").css("display","block");$("#intro-video_container > video").css("height","315px").parent().css("width","560px");$("#intro-video-button").attr("data-active","1");$("#intro-video-button").addClass("selected").removeClass("unselected");break;case "2":$("#sentence-title-tab").css("display","block");$("#sentence-title-button").attr("data-active","1");break;default:$("#view-answer-tab").css("display", "block"),$("#view-answer-button").attr("data-active","1")}}function m(a,b){alert(b[0]);for(var c=0;c<b.length;c++)if(a==b[c])return!0;return!1}function n(){e=activityContent.group.length;c=[];d=[];b='<thead class="categories">';for(var a=0;a<e;a++)h[a]=activityContent.group[a].image,b+='<td value="'+a+'" class="picture" height="120px" ><img id="picture"src="'+resourceUrl+h[a]+'" class="img-container"/></td>';b+='</thead><tr class="categories">';for(a=0;a<e;a++)d[a]=$.trim(activityContent.group[a].words).split(","), c=c.concat(d[a]),b+='<td class="category">\n<ul id="group_'+a+'" class="sortable">\n</ul>\n</td>';b+="</tr>";$("#category-container").append(b);c=shuffle(c);html='<ul id="list">';for(a=0;a<c.length;a++)html+='<li class="word">'+c[a]+'<span class="trueFalseIcon"></span></li>';html+="</ul>";$("#wordList").append(html);$("#list").sortable({opacity:0.8,containment:"#activity-container",scroll:!1,connectWith:["#activity-container ul"],receive:function(){}});$("#category-container ul").sortable({opacity:0.8, containment:"#activity-container",scroll:!1,connectWith:["#activity-container ul"],over:function(){$(this).parent().css({"background-color":"#f7f7f7"});$(this).css({"background-color":"#f7f7f7",width:"140px","float":"left"});$(this).children().css({"background-color":"transparent"})},out:function(){$(this).css({"background-color":"transparent"});$(this).parent().css({"background-color":"transparent"})},receive:function(a,b){$(this).css({"background-color":"transparent"});$(this).parent().css({"background-color":"transparent"}); b.item.animate({"background-color":"#e5f6f7"},500,function(){b.item.animate({"background-color":"transparent"},500)});$(this).children().css({"background-color":"trannsparent"})}});$("#category-container ul").droppable({drop:function(){playSound(Ucan.Resource.Audio.getClickedSound())}});a=100/e;$(".category").css({width:a+"%"})}function o(){e=activityContent.group.length;c=[];d=[];b='<thead class="categories">';for(i=0;i<e;i++)h[i]=activityContent.group[i].image,b+='<td value="'+i+'" class="picture" height="120px" ><img id="picture"src="'+ resourceUrl+h[i]+'" class="img-container"/></td>';b+='</thead><tr class="categories">';for(i=0;i<e;i++)d[i]=$.trim(activityContent.group[i].words).split(","),c=c.concat(d[i]),b+='<td class="category2">\n<ul id="groups_'+i+'" class="sortable">\n</ul>\n</td>';b+="</tr>";$("#category-container-answer").append(b);c=shuffle(c);phtml='<ul id="list-answer">';for(i=0;i<c.length;i++)phtml+='<li class="word-answer">'+c[i]+'<span class="trueFalseIcon"></span></li>';phtml+="</ul>";$("#wordList-answer").append(phtml).hide(); var a=100/e;$(".category2").css({width:a+"%"})}$("#record-button-set").hide();$("#view-answer-tab").hide();$("#view-answer-button").hide();var e=activityContent.group.length,g=0;$("#intro-video-button").before("");f("0");$(".navigator-button").click(function(){f($(this).attr("data-order"))});$("#home-title-start-button").click(function(){f("1")});$("#next-button").click(function(){2>g&&f((g+1).toString())});$("#previous-button").click(function(){0<g&&f((g-1).toString())});var j=!0,e=activityContent.group.length, c=[],d=[],b='<thead class="categories">',h=[];n();o();var k=!0;$("#show-answer").click(function(){f("3");if(k){$("td.category2 ul").each(function(){$(this).children("li:last").css({"border-bottom":"1px solid #6C6CB5"})});var a=0;$("li.word").each(function(){$(this).css("opacity","0.5");for(var b=$(this).text(),c=0;c<d.length;c++)console.log(b),console.log(d[c]),m($.trim(b),d[c])&&$("#groups_"+c).append('<li class="key">'+b+"</li>");a++});k=!1;$(".key").fadeIn(1E3).fadeOut(1E3).fadeIn(1E3)}});var l= 0;for(i=0;i<d.length;i++)l+=d[i].length;$("#loadResult").click(function(){if(j){j=!1;$(".sortable").sortable("disable");playSound(Ucan.Resource.Audio.getShowResultSound());var a=0,b=0;$(".sortable").each(function(){$(this).children().each(function(){var c=$(this).text();m(c,d[b])?(a++,insertTrueFalseIcon(!0,$(this).children(".trueFalseIcon"))):insertTrueFalseIcon(!1,$(this).children(".trueFalseIcon"))});b++});$(".true-icon").css({margin:"-9px 0px 0px 5px"});$(".false-icon").css({margin:"-5px 0px 0px 5px"}); $(".true-icon").fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500);$(".false-icon").fadeIn(500).fadeOut(500).fadeIn(500);10>a?$("#num-of-correct-answers-result").html("0"+a):$("#num-of-correct-answers-result").html(a);score=Math.floor(100*(a/l));10>score?$("#score-text").html("0"+score):$("#score-text").html(score);$("#show-result").slideDown(2E3)}});$("#redo").click(function(){numberOfTrueAnswers=0;$("#show-result").slideUp(1200,function(){$("#category-container-answer").html(""); $("#category-container").html("");$("#wordList").html("");$("#wordList-answer").html("");o();n()});f("0");k=j=!0})});
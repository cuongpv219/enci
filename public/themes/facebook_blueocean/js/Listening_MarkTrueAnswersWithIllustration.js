$(document).ready(function(){function k(b,a,c){this.id=b;this.name=a;this.image=c}function l(b,a,c){this.id=b;this.title=a;this.characterList=c}function m(a,e){var d=j(a);if(e.length!=d.characterList.length)return!1;for(c=0;c<e.length;c++)if(-1==d.characterList.indexOf(e[c]))return!1;return!0}function j(b){for(a=0;a<d.length;a++)if(d[a].id==b)return d[a];return null}var g=activityContent.group.length,h=!0,i=!1,f=function(){var b=activityContent.character_list,c=[];for(a=0;a<b.length;a++)c.push(new k(a,
$.trim(b[a].character),b[a].image));return c}(),d=function(){var b=[];for(a=0;a<g;a++){var e=[],d=activityContent.group[a].character.split("/");for(c=0;c<d.length;c++)e.push($.trim(d[c]));b.push(new l(a,activityContent.group[a].sentence,e))}return b}(),a,c;(function(){var b="",e="";for(a=0;a<f.length;a++)b+='<div class="cell character">'+f[a].name+"</div>",e+='<div class="cell character"><img src="'+f[a].image+'" alt="" /></div>';$("#character-list .cell:first").after(b);$("#table-content .cell:first").after(e);
for(a=0;a<d.length;a++){b="";b+='<div class="row"><div class="cell clause" data-id="'+d[a].id+'">'+d[a].title+"</div>";for(c=0;c<f.length;c++)b+='<div class="cell"><div class="global-choice-square-green-1" data-character="'+f[c].name+'"></div></div>';b+='<div class="cell true-false-icon"></div></div>';$("#table-content").append(b)}})();(function(){$("#table-content .global-choice-square-green-1").click(function(){$(this).hasClass("checked")?$(this).removeClass("checked"):h&&$(this).addClass("checked")});
$("#loadResult").click(function(){if(h){h=!1;playSound(Ucan.Resource.Audio.getShowResultSound());var a=0;$("#table-content .clause").each(function(){var c=$(this).attr("data-id"),d=[];$(this).parents(".row:first").find(".global-choice-square-green-1.checked").each(function(){d.push($(this).attr("data-character"))});m(c,d)?(a++,insertTrueFalseIcon(!0,$(this).siblings(".cell.true-false-icon"))):insertTrueFalseIcon(!1,$(this).siblings(".cell.true-false-icon"))});$(".true-icon, .false-icon").ucanAnimateTrueFalseIcon();
$("#num-of-correct-answers-result").text(a+"/"+g);score=Math.floor(100*(a/g));$("#score-text").text(score);0==g?window.location.replace(nextActivityUrl):($("#show-result").show("slide",{direction:"left"},Ucan.Constants.getShowResultSpeed()),i=!0)}});$("#redo").click(function(){i&&(i=!1,$("#show-result").hide("slide",{direction:"left"},Ucan.Constants.getHideResultSpeed(),function(){h=!0;$(".cell.true-false-icon").html("");$("#table-content .global-choice-square-green-1").removeClass("checked")}))});
$("#show-answer").click(function(){$("#table-content .clause").each(function(){var b=$(this).attr("data-id");j(b)&&$(this).siblings(".cell").children(".global-choice-square-green-1").each(function(){$(this).removeClass("checked");for(c=0;c<d[a].characterList.length;c++)-1!=d[a].characterList.indexOf($(this).attr("data-character"))&&$(this).addClass("checked")})});$(".global-choice-square-green-1.checked").ucanAnimateAnswers()})})()});
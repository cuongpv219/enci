$(document).ready(function(){function g(a){return 0==a.indexOf("#")?!0:!1}function j(a){return!1==g(a)?a:a.substring(1)}function l(){f=activityContent.group.length;hasAudio=void 0!=activityContent.listening_audio&&""!=activityContent.listening_audio;c="";d=[];for(a=0;a<f;a++){c+='<div class="sentence '+(hasAudio?"sentence-short":"sentence-long")+'" id="radio_'+a+'">';d[a]=activityContent.group[a].words.split("||");d[a].length>e&&(e=d[a].length);shuffle_array=shuffle(d[a]);c+='<div class="sentence-number" id="sentence_'+
a+'"> '+(a+1)+" </div>";for(b=0;b<shuffle_array.length;b++)c+='<div value="0" class ="wordchoice '+(hasAudio?"wordchoice-short":"wordchoice-long")+'" id="wordchoice_'+a+"_"+b+'" >'+j(shuffle_array[b]).replace(/\[\[/g,'<span class="exactly">').replace(/\]\]/g,"</span>")+"</div>",g(shuffle_array[b]);c+='<span id="true-false-icon_'+a+'"></span>';c+='<div style="clearBoth"> </div>';c+="</div>"}$("#word-list").append(c);$("#word-list").children(".sentence").last().css("border-bottom","1px solid transparent");
$(".wordchoice").click(function(){h&&(playSound(Ucan.Resource.Audio.getClickedSound()),$(this).attr("value",1),$(this).parents().children(".wordchoice-click").addClass("wordchoice"),$(this).parents().children(".wordchoice-click").removeClass("wordchoice-click"),$(this).siblings().attr("value",0),$(this).removeClass("wordchoice"),$(this).addClass("wordchoice-click"))})}var h=!0,a,b,k=!1,f=activityContent.group.length,c="",d=[],i="",e=0;l();5==e&&$(".wordchoice").width(146);$("#show-answer").click(function(){$(".wordchoice-click").addClass("wordchoice").removeClass("wordchoice-click");
for(a=0;a<f;a++){var c=activityContent.group[a].words.split("||");for(b=0;b<c.length;b++)g(c[b])&&(i=j(c[b]).replace(/\[\[/g,"").replace(/\]\]/g,""));for(b=0;b<c.length;b++)$("#wordchoice_"+a+"_"+b).text()==i.replace('<span class="global-highlight-orange">',"").replace("</span>","")&&$("#wordchoice_"+a+"_"+b).addClass("wordchoice-click").remove("wordchoice")}$(".wordchoice-click").fadeOut(500).fadeIn(500)});$("#loadResult").click(function(){if(h){$(".cp-jplayer").jPlayer("stop");h=!1;var c=0;for(a=
0;a<activityContent.group.length;a++){var d=activityContent.group[a].words.split("||");for(b=0;b<d.length;b++)g(d[b])&&(i=j(d[b]).replace(/\[\[/g,"").replace(/\]\]/g,"").replace('<span class="global-highlight-orange">',"").replace("</span>",""));var e=0;for(b=0;b<d.length;b++)1==$("#wordchoice_"+a+"_"+b).attr("value")&&$("#wordchoice_"+a+"_"+b).text()==i&&(c++,insertTrueFalseIcon(!0,"#true-false-icon_"+a),$("#true-false-icon_"+a).attr("class","true-icon"),e=1);e||(insertTrueFalseIcon(!1,"#true-false-icon_"+
a),$("#true-false-icon_"+a).attr("class","false-icon"))}playSound(Ucan.Resource.Audio.getShowResultSound());$(".true-icon").css({margin:"7px 2px 0px 12px","box-shadow":"none",border:"none"});$(".false-icon").css({margin:"7px 2px 0px 10px","box-shadow":"none",border:"none"});$(".true-icon, .false-icon").ucanAnimateTrueFalseIcon();$("#num-of-correct-answers-result").text(c+"/"+f);score=Math.floor(100*(c/f));$("#score-text").text(score);$("#show-result").show("slide",{direction:"left"},Ucan.Constants.getShowResultSpeed());
k=!0}});$("#redo").click(function(){k&&(k=!1,$("#show-result").hide("slide",{direction:"left"},Ucan.Constants.getHideResultSpeed(),function(){$("#word-list").html("");h=!0;l()}))})});